# Graph Query Tests

## test_query_multi_filter_deep_children_with_layer_data

该测试用例验证 `query_multi_filter_deep_children` 函数的多种场景。

### 测试数据

使用 `src/test/json/layers/layer_01.txt` 中的层级数据：

```
WORL (9304_0)
  └─ SITE (17496_169982)
      ├─ ZONE (17496_171099)
      │   └─ EQUI (17496_171100)
      │       └─ (17496_171101)
      ├─ (17496_169983)
      └─ (25688_4135)
```

### 测试场景

1. **单个起点 + 单个类型过滤**
   - 从 WORL 查询所有 SITE 类型的子孙
   - 验证能正确找到 SITE 节点

2. **单个起点 + 多个类型过滤**
   - 从 SITE 查询 ZONE 和 EQUI 类型的子孙
   - 验证能同时找到两种类型的节点

3. **深度查询**
   - 从 ZONE 查询 EQUI 类型的子孙
   - 验证能跨层级查找

4. **多个起点查询**
   - 从 SITE 和 ZONE 两个起点查询 EQUI
   - 验证去重逻辑（同一个 EQUI 只返回一次）

5. **查询所有类型**
   - nouns 参数为空数组
   - 验证返回所有子孙节点

6. **空输入边界测试**
   - refnos 参数为空数组
   - 验证返回空结果

7. **不存在的类型**
   - 查询一个不存在的类型名
   - 验证返回空结果

### 实现要点

- 使用真实的测试数据文件
- 完整构建 pe 表和 pe_owner 关系
- 测试完成后清理数据
- 覆盖边界条件和异常情况
