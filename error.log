02:58:48 [ERROR] QueryErr { sql: "select * omit id from only pe:24384_24828 limit 1;", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select * omit id from only pe:24384_25674 limit 1;", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select * omit id from only pe:24383_66457 limit 1;", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select id,noun ,name?:'' as name, string::contains(fn::find_ancestor_type(id,'SITE').name?:'','PIPE') as site,\n                    <-pe_owner.in.filter(|$x| $x.noun == 'VALV').name as valv from pe:24381_177397.refno.HREF", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select * omit id from only pe:24381_177374 limit 1;", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select * omit id from only pe:24384_24828 limit 1;", msg: "Internal error: Anonymous access not allowed: Not enough permissions to perform this action", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select value id from EQUI where REFNO.dbnum=5107 and (SPRE != none or CATR != none)", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "SELECT value id FROM pe WHERE dbnum = 5107 AND noun IN ['ZONE'] AND array::len(children) > 0", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        let $dbnos = select value (select value DBNO from CURD.refno where STYP=1) from only MDB where NAME='/651YK' limit 1;\n        let $a = (select value id from (select REFNO.id as id, array::find_index($dbnos, REFNO.dbnum) as o from WORL where REFNO.dbnum in $dbnos order by o));\n        array::flatten(select value in.* from $a<-pe_owner)[?noun = 'SITE']\n        ", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: " select value (select value DBNO from CURD.refno where STYP=1) from only MDB where NAME='/651YK' limit 1", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        --通过传递refno，查询属性值\n        select fn::default_full_name(REFNO) as NAME, * from only pe:21491_18938.refno fetch pe;\n        select string::concat(':', if UDNA==none || string::len(UDNA)==0 { DYUDNA } else { UDNA }) as u, DFLT as v, UTYP as t from UDA where !UHIDE and pe:21491_18938.noun in ELEL;\n        -- uda 单独做个查询？\n        select string::concat(':', if u.UDNA==none || string::len( u.UDNA)==0 { u.DYUDNA } else { u.UDNA }) as u, u.UTYP as t, v from (ATT_UDA:21491_18938).udas where u.UTYP != none;\n        ", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        --通过传递refno，查询属性值\n        select fn::default_full_name(REFNO) as NAME, * from only pe:17496_265703.refno fetch pe;\n        select string::concat(':', if UDNA==none || string::len(UDNA)==0 { DYUDNA } else { UDNA }) as u, DFLT as v, UTYP as t from UDA where !UHIDE and pe:17496_265703.noun in ELEL;\n        -- uda 单独做个查询？\n        select string::concat(':', if u.UDNA==none || string::len( u.UDNA)==0 { u.DYUDNA } else { u.UDNA }) as u, u.UTYP as t, v from (ATT_UDA:17496_265703).udas where u.UTYP != none;\n        ", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "SELECT value id FROM pe WHERE dbnum = 5107 AND noun IN ['BRAN', 'PIPE', 'SITE', 'ZONE']", msg: "Connection uninitialised", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        select refno, noun, name, owner, 0 as order,\n                        op?:0 as op,\n                        array::len((select value refnos from only type::record(\"his_pe\", record::id($self.id)))?:[]) as mod_cnt,\n                        array::len(children) as children_count,\n                        status_code as status_code\n                    from pe:21491_10801.children where id!=none and record::exists(id) and !deleted\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        select\n                in as refno,\n                in.sesno as sesno,\n                in.noun as noun,\n                world_trans.d as wt,\n                aabb.d as aabb,\n                (select value [record::id(out), trans.d] from out->geo_relate where geo_type in [\"Compound\", \"Pos\"] and trans.d != NONE ) as ts,\n                (select value [in, world_trans.d,\n                    (select record::id(out) as id, geo_type, trans.d as trans, out.aabb.d as aabb\n                    from array::flatten(out->geo_relate) where trans.d != NONE and ( geo_type==\"Neg\" or (geo_type==\"CataCrossNeg\"\n                        and geom_refno in (select value ngmr from pe:24383_101155<-ngmr_relate) ) ))]\n                        from array::flatten([array::flatten(in<-neg_relate.in->inst_relate), array::flatten(in<-ngmr_relate.in->inst_relate)]) where world_trans.d!=none\n                ) as neg_ts\n             from inst_relate:24383_101155 where in.id != none and !bad_bool and ((in<-neg_relate)[0] != none or in<-ngmr_relate[0] != none) and aabb.d != NONE\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        select record::id(out) as id, geom_refno, trans.d as trans, out.param as param, out.aabb as aabb_id\n        from pe:24383_101165->inst_relate->inst_info->geo_relate\n        where !out.bad and geom_refno in []  and out.aabb!=none and out.param!=none", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: " select in as refno, (->inst_info)[0] as inst_info_id, (select value array::flatten([geom_refno, cata_neg])\n            from ->inst_info->geo_relate where visible and !out.bad and cata_neg!=none) as boolean_group\n            from inst_relate where in.id != none and (->inst_info)[0]!=none and has_cata_neg and !bad_bool and !booled", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        select\n                in as refno,\n                in.noun as noun,\n                world_trans.d as wt,\n                aabb.d as aabb,\n                (select value [out.param, trans.d] from out->geo_relate where geo_type in [\"Compound\", \"Pos\"] and trans.d != NONE and out.param != NONE) as ts,\n                (select value [in, world_trans.d,\n                    (select out.param as param, geo_type, para_type, trans.d as trans, out.aabb.d as aabb\n                    from array::flatten(out->geo_relate) where trans.d != NONE and out.param != NONE and ( geo_type==\"Neg\" or (geo_type==\"CataCrossNeg\"\n                        and geom_refno in (select value ngmr from in<-ngmr_relate) ) ))]\n                        from array::flatten([array::flatten(in<-neg_relate.in->inst_relate), array::flatten(in<-ngmr_relate.in->inst_relate)]) where world_trans.d!=none\n                ) as neg_ts\n             from inst_relate where in.id != none and ((in<-neg_relate)[0] != none or in<-ngmr_relate[0] != none) and aabb.d != NONE\n         and !bad_bool and !booled", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "SELECT VALUE id FROM fn::collect_children(pe:21491_10801, none)", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "select value [noun, owner.noun] from only pe:17496_296344 limit 1", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n             select value [id,\n                (select * from object::values(type::record(\"inst_info\", cata_hash).ptset) where number=$parent.refno.ARRI)[0],\n                (select * from object::values(type::record(\"inst_info\", cata_hash).ptset) where number=$parent.refno.LEAV)[0]\n            ] from array::flatten([pe:24381_105223,pe:24381_105231][? owner.noun in ['BRAN', 'HANG']])\n             ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        select in as refno, (->inst_info)[0] as inst_info_id,\n        (select value array::flatten([geom_refno, cata_neg])\n            from ->inst_info->geo_relate where visible and !out.bad and cata_neg!=none) as boolean_group\n        from inst_relate where in.id != none and (->inst_info)[0]!=none and has_cata_neg and !bad_bool and !booled\n    ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "\n            select\n                in.id as refno,\n                in.old_pe as old_refno,\n                in.owner as owner, generic, aabb.d as world_aabb, world_trans.d as world_trans, out.ptset.d.pt as pts,\n                if booled_id != none { [{ \"geo_hash\": booled_id }] } else { (select trans.d as transform, record::id(out) as geo_hash, false as is_tubi from out->geo_relate where visible && out.meshed && trans.d != none && geo_type='Pos')  } as insts,\n                booled_id != none as has_neg,\n                <datetime>dt as date\n            from inst_relate:17496_497034 where aabb.d != none\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:65:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        -- 批量查询所有起点的子孙节点，使用 fn::collect_descendant_ids_by_types\n        let $ids = array::distinct(array::filter(array::flatten(array::map([pe:24381_36945], |$refno|\n            fn::collect_descendant_ids_by_types($refno, ['NBOX','NCYL','NLCY','NSBO','NCON','NSNO','NPYR','NDIS','NXTR','NCTO','NRTO','NREV','NSCY'], none, \"..\")\n        )), |$v| $v != none));\n        SELECT VALUE id FROM $ids;\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "RETURN 1", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: " let $f = (select value (select value DBNO from CURD.refno where STYP=1) from only MDB where NAME='/651YK' limit 1)[0]; (select value REFNO.* from WORL where REFNO.dbnum=$f and REFNO.noun='WORL' limit 1)[0]", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: " select value (select value DBNO from CURD.refno where STYP=1) from only MDB where NAME='/ALL' limit 1", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: " let $f = (select value (select value DBNO from CURD.refno where STYP=1) from only MDB where NAME='/651YK' limit 1)[0]; (select value REFNO.* from WORL where REFNO.dbnum=$f and REFNO.noun='WORL' limit 1)[0]", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        -- 批量查询所有起点的子孙节点，使用 fn::collect_descendant_ids_by_types\n        let $ids = array::distinct(array::filter(array::flatten(array::map([pe:24383_73928], |$refno|\n            fn::collect_descendant_ids_by_types($refno, ['BRAN','HANG'], none, \"..\")\n        )), |$v| $v != none));\n        SELECT VALUE id FROM $ids;\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n            let $a = array::flatten(select value array::flatten([id, <-pe_owner.in]) from [pe:21895_68780])[? noun!=NONE && !deleted];\n            select [cata_hash, type::record('inst_info', cata_hash).id!=none,\n                    type::record('inst_info', cata_hash).ptset] as k,\n                 array::group(id) as v\n            from $a where noun not in [\"BRAN\", \"HANG\"]  group by k;\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        -- 批量查询所有起点的子孙节点，使用 fn::collect_descendants_filter_inst\n        array::distinct(array::filter(array::flatten(array::map([pe:24383_73928], |$refno|\n            fn::collect_descendants_filter_inst($refno, ['BRAN','HANG'], false, true, false)\n        )), |$v| $v != none));\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "\n        -- 批量查询所有起点的子孙节点，使用 fn::collect_descendants_filter_spre\n        array::distinct(array::filter(array::flatten(array::map([pe:21895_68780], |$refno|\n            fn::collect_descendants_filter_spre($refno, [], false, none, \"..\")\n        )), |$v| $v != none));\n        ", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:25688_43205).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:24383_66745).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_202374).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_171666).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_140425).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_202374).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_268348).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_496443).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_268335).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:24384_28745).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_274326).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_274161).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_171258).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_172032).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_140426).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_172030).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:24381_178543).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:23708_2475).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:24383_93573).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_268345).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:17496_105740).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
02:58:48 [ERROR] QueryErr { sql: "return fn::ancestor(pe:8196_14755).refno.*;", msg: "Internal error: Failed to send command: sending into a closed channel", position: "src/rs_surreal/query_ext.rs:55:24" }
